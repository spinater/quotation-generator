exports.id=5068,exports.ids=[5068],exports.modules={11614:(a,b,c)=>{Promise.resolve().then(c.bind(c,56302)),Promise.resolve().then(c.t.bind(c,3991,23))},16342:(a,b,c)=>{Promise.resolve().then(c.bind(c,76828)),Promise.resolve().then(c.t.bind(c,65169,23))},25799:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"unstable_rethrow",{enumerable:!0,get:function(){return function a(b){if((0,g.isNextRouterError)(b)||(0,f.isBailoutToCSRError)(b)||(0,i.isDynamicServerError)(b)||(0,h.isDynamicPostpone)(b)||(0,e.isPostpone)(b)||(0,d.isHangingPromiseRejectionError)(b))throw b;b instanceof Error&&"cause"in b&&a(b.cause)}}});let d=c(82831),e=c(43740),f=c(29305),g=c(61981),h=c(26906),i=c(69168);("function"==typeof b.default||"object"==typeof b.default&&null!==b.default)&&void 0===b.default.__esModule&&(Object.defineProperty(b.default,"__esModule",{value:!0}),Object.assign(b.default,b),a.exports=b.default)},29088:(a,b,c)=>{"use strict";function d(){throw Object.defineProperty(Error("`unauthorized()` is experimental and only allowed to be used when `experimental.authInterrupts` is enabled."),"__NEXT_ERROR_CODE",{value:"E411",enumerable:!1,configurable:!0})}Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"unauthorized",{enumerable:!0,get:function(){return d}}),c(98541).HTTP_ERROR_FALLBACK_ERROR_CODE,("function"==typeof b.default||"object"==typeof b.default&&null!==b.default)&&void 0===b.default.__esModule&&(Object.defineProperty(b.default,"__esModule",{value:!0}),Object.assign(b.default,b),a.exports=b.default)},43693:(a,b,c)=>{"use strict";c.d(b,{p:()=>e});var d=c(21124);function e({label:a,error:b,helperText:c,required:e,className:f="",id:g,...h}){let i=g||`input-${a?.toLowerCase().replace(/\s+/g,"-")}`,j=`
    w-full px-3 py-2 border rounded-lg
    focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent
    disabled:bg-gray-100 disabled:cursor-not-allowed
    ${b?"border-red-500 focus:ring-red-500":"border-gray-300"}
    ${f}
  `.trim().replace(/\s+/g," ");return(0,d.jsxs)("div",{className:"w-full",children:[a&&(0,d.jsxs)("label",{htmlFor:i,className:"block text-sm font-medium text-gray-700 mb-1",children:[a,e&&(0,d.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]}),(0,d.jsx)("input",{id:i,className:j,"aria-invalid":b?"true":"false","aria-describedby":b?`${i}-error`:c?`${i}-helper`:void 0,...h}),b&&(0,d.jsx)("p",{id:`${i}-error`,className:"mt-1 text-sm text-red-600",children:b}),!b&&c&&(0,d.jsx)("p",{id:`${i}-helper`,className:"mt-1 text-sm text-gray-500",children:c})]})}c(38301)},46737:(a,b,c)=>{"use strict";c.d(b,{$:()=>e});var d=c(21124);function e({variant:a="primary",size:b="md",isLoading:c=!1,children:e,className:f="",disabled:g,...h}){let i=`inline-flex items-center justify-center font-medium rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed ${({primary:"bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500",secondary:"bg-gray-600 text-white hover:bg-gray-700 focus:ring-gray-500",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500",ghost:"bg-transparent text-gray-700 hover:bg-gray-100 focus:ring-gray-500 border border-gray-300"})[a]} ${({sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-base",lg:"px-6 py-3 text-lg"})[b]} ${f}`.trim();return(0,d.jsx)("button",{className:i,disabled:g||c,...h,children:c?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,d.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,d.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Loading..."]}):e})}c(38301)},47614:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),!function(a,b){for(var c in b)Object.defineProperty(a,c,{enumerable:!0,get:b[c]})}(b,{getRedirectError:function(){return g},getRedirectStatusCodeFromError:function(){return l},getRedirectTypeFromError:function(){return k},getURLFromRedirectError:function(){return j},permanentRedirect:function(){return i},redirect:function(){return h}});let d=c(91203),e=c(92781),f=c(19121).actionAsyncStorage;function g(a,b,c){void 0===c&&(c=d.RedirectStatusCode.TemporaryRedirect);let f=Object.defineProperty(Error(e.REDIRECT_ERROR_CODE),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return f.digest=e.REDIRECT_ERROR_CODE+";"+b+";"+a+";"+c+";",f}function h(a,b){var c;throw null!=b||(b=(null==f||null==(c=f.getStore())?void 0:c.isAction)?e.RedirectType.push:e.RedirectType.replace),g(a,b,d.RedirectStatusCode.TemporaryRedirect)}function i(a,b){throw void 0===b&&(b=e.RedirectType.replace),g(a,b,d.RedirectStatusCode.PermanentRedirect)}function j(a){return(0,e.isRedirectError)(a)?a.digest.split(";").slice(2,-2).join(";"):null}function k(a){if(!(0,e.isRedirectError)(a))throw Object.defineProperty(Error("Not a redirect error"),"__NEXT_ERROR_CODE",{value:"E260",enumerable:!1,configurable:!0});return a.digest.split(";",2)[1]}function l(a){if(!(0,e.isRedirectError)(a))throw Object.defineProperty(Error("Not a redirect error"),"__NEXT_ERROR_CODE",{value:"E260",enumerable:!1,configurable:!0});return Number(a.digest.split(";").at(-2))}("function"==typeof b.default||"object"==typeof b.default&&null!==b.default)&&void 0===b.default.__esModule&&(Object.defineProperty(b.default,"__esModule",{value:!0}),Object.assign(b.default,b),a.exports=b.default)},56302:(a,b,c)=>{"use strict";c.d(b,{default:()=>m});var d=c(21124),e=c(38301),f=c(8849),g=c(40284),h=c(46737),i=c(43693),j=c(71759),k=c(63287),l=c(97489);function m({companies:a,onSubmit:b,initialData:c,isEdit:m=!1}){let n=a.find(a=>a.isDefault)||a[0],[o,p]=(0,e.useState)({companyId:c?.companyId||n?.id||"",customerName:c?.customerName||"",customerAddress:c?.customerAddress||"",customerTaxId:c?.customerTaxId||"",customerPhone:c?.customerPhone||"",issueDate:c?.issueDate||new Date().toISOString().split("T")[0],paymentDate:c?.paymentDate||new Date().toISOString().split("T")[0],paymentMethod:c?.paymentMethod||"เงินสด",items:c?.items||[{id:crypto.randomUUID(),description:"",quantity:1,unit:"ชิ้น",pricePerUnit:0,amount:0,order:0}],hasVat:c?.hasVat??!0,notes:c?.notes||"",language:c?.language||"th",signatureUrl:c?.signatureUrl||"",signatureName:c?.signatureName||"",signatureTitle:c?.signatureTitle||""}),[q,r]=(0,e.useState)(!1),[s,t]=(0,e.useState)({}),u=o.items.reduce((a,b)=>b.parentItemId?a:a+b.amount,0),v=o.hasVat?.07*u:0,w=u+v,x=(0,l.Vn)(w),y=a=>{let{name:b,value:c}=a.target;p(a=>({...a,[b]:c})),s[b]&&t(a=>{let c={...a};return delete c[b],c})},z=a=>{p(b=>({...b,language:a}))},A=a=>{p(b=>({...b,items:b.items.filter(b=>b.id!==a&&b.parentItemId!==a).map((a,b)=>({...a,order:b}))}))},B=(a,b,c)=>{p(d=>({...d,items:d.items.map(d=>{if(d.id===a){let a={...d,[b]:c};return("quantity"===b||"pricePerUnit"===b)&&(a.amount=a.quantity*a.pricePerUnit),a}return d})}))},C=async a=>{if(a.preventDefault(),(()=>{let a={};return o.companyId||(a.companyId="Please select a company"),o.customerName.trim()||(a.customerName="Customer name is required"),o.customerAddress.trim()||(a.customerAddress="Customer address is required"),0===o.items.filter(a=>!a.parentItemId).length&&(a.items="At least one item is required"),o.items.forEach((b,c)=>{b.description.trim()||(a[`item_${c}_description`]="Description is required"),b.quantity<=0&&(a[`item_${c}_quantity`]="Quantity must be greater than 0"),b.pricePerUnit<0&&(a[`item_${c}_price`]="Price cannot be negative")}),t(a),0===Object.keys(a).length})()){r(!0);try{await b(o)}catch(a){console.error("Error submitting form:",a),t({submit:"Failed to save receipt. Please try again."})}finally{r(!1)}}},D=o.items.filter(a=>!a.parentItemId);return(0,d.jsxs)("form",{onSubmit:C,className:"space-y-8",children:[(0,d.jsxs)("div",{className:"bg-white p-6 rounded-lg border space-y-4",children:[(0,d.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"ข้อมูลบริษัท / Company Information"}),(0,d.jsxs)("div",{children:[(0,d.jsx)(j.J,{htmlFor:"companyId",children:"เลือกบริษัท / Select Company *"}),(0,d.jsxs)("select",{id:"companyId",name:"companyId",value:o.companyId,onChange:y,className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${s.companyId?"border-red-500":"border-gray-300"}`,children:[(0,d.jsx)("option",{value:"",children:"-- Select Company --"}),a.map(a=>(0,d.jsxs)("option",{value:a.id,children:[a.name," ",a.isDefault?"(Default)":""]},a.id))]}),s.companyId&&(0,d.jsx)("p",{className:"text-sm text-red-600 mt-1",children:s.companyId})]})]}),(0,d.jsxs)("div",{className:"bg-white p-6 rounded-lg border space-y-4",children:[(0,d.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"ข้อมูลลูกค้า / Customer Information"}),(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)(j.J,{htmlFor:"customerName",children:"ชื่อลูกค้า / Customer Name *"}),(0,d.jsx)(i.p,{id:"customerName",name:"customerName",value:o.customerName,onChange:y,placeholder:"บริษัท ABC จำกัด",className:s.customerName?"border-red-500":""}),s.customerName&&(0,d.jsx)("p",{className:"text-sm text-red-600 mt-1",children:s.customerName})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)(j.J,{htmlFor:"customerTaxId",children:"เลขประจำตัวผู้เสียภาษี / Tax ID"}),(0,d.jsx)(i.p,{id:"customerTaxId",name:"customerTaxId",value:o.customerTaxId,onChange:y,placeholder:"0-0000-00000-00-0"})]})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)(j.J,{htmlFor:"customerAddress",children:"ที่อยู่ / Address *"}),(0,d.jsx)(k.f,{id:"customerAddress",name:"customerAddress",value:o.customerAddress,onChange:y,placeholder:"123 ถนน... แขวง... เขต... กรุงเทพฯ 10000",rows:3,className:s.customerAddress?"border-red-500":""}),s.customerAddress&&(0,d.jsx)("p",{className:"text-sm text-red-600 mt-1",children:s.customerAddress})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)(j.J,{htmlFor:"customerPhone",children:"โทรศัพท์ / Phone"}),(0,d.jsx)(i.p,{id:"customerPhone",name:"customerPhone",value:o.customerPhone,onChange:y,placeholder:"02-123-4567"})]})]}),(0,d.jsxs)("div",{className:"bg-white p-6 rounded-lg border space-y-4",children:[(0,d.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"รายละเอียดใบเสร็จ / Receipt Details"}),(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)(j.J,{htmlFor:"issueDate",children:"วันที่ออก / Issue Date *"}),(0,d.jsx)(i.p,{id:"issueDate",name:"issueDate",type:"date",value:"string"==typeof o.issueDate?o.issueDate:o.issueDate.toISOString().split("T")[0],onChange:y})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)(j.J,{htmlFor:"paymentDate",children:"วันที่ชำระ / Payment Date"}),(0,d.jsx)(i.p,{id:"paymentDate",name:"paymentDate",type:"date",value:o.paymentDate?"string"==typeof o.paymentDate?o.paymentDate:o.paymentDate.toISOString().split("T")[0]:"",onChange:y})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)(j.J,{htmlFor:"paymentMethod",children:"วิธีชำระเงิน / Payment Method"}),(0,d.jsxs)("select",{id:"paymentMethod",name:"paymentMethod",value:o.paymentMethod,onChange:y,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,d.jsx)("option",{value:"เงินสด",children:"เงินสด / Cash"}),(0,d.jsx)("option",{value:"โอนเงิน",children:"โอนเงิน / Transfer"}),(0,d.jsx)("option",{value:"เช็ค",children:"เช็ค / Cheque"}),(0,d.jsx)("option",{value:"บัตรเครดิต",children:"บัตรเครดิต / Credit Card"})]})]})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)(j.J,{children:"ภาษา / Language"}),(0,d.jsxs)("div",{className:"flex gap-2 mt-2",children:[(0,d.jsx)(h.$,{type:"button",variant:"th"===o.language?"primary":"ghost",onClick:()=>z("th"),size:"sm",children:"ไทย (TH)"}),(0,d.jsx)(h.$,{type:"button",variant:"en"===o.language?"primary":"ghost",onClick:()=>z("en"),size:"sm",children:"English (EN)"})]})]})]}),(0,d.jsxs)("div",{className:"bg-white p-6 rounded-lg border space-y-4",children:[(0,d.jsxs)("div",{className:"flex justify-between items-center",children:[(0,d.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"รายการสินค้า/บริการ / Items"}),(0,d.jsxs)(h.$,{type:"button",onClick:()=>{let a={id:crypto.randomUUID(),description:"",quantity:1,unit:"ชิ้น",pricePerUnit:0,amount:0,order:o.items.length};p(b=>({...b,items:[...b.items,a]}))},size:"sm",children:[(0,d.jsx)(f.A,{className:"w-4 h-4 mr-2"}),"เพิ่มรายการ / Add Item"]})]}),s.items&&(0,d.jsx)("p",{className:"text-sm text-red-600",children:s.items}),(0,d.jsx)("div",{className:"space-y-4",children:D.map((a,b)=>{let c=o.items.filter(b=>b.parentItemId===a.id);return(0,d.jsxs)("div",{className:"border rounded-lg p-4 space-y-4",children:[(0,d.jsxs)("div",{className:"flex justify-between items-start",children:[(0,d.jsxs)("span",{className:"font-semibold text-gray-700",children:["รายการที่ ",b+1]}),(0,d.jsx)(h.$,{type:"button",variant:"ghost",size:"sm",onClick:()=>A(a.id),children:(0,d.jsx)(g.A,{className:"w-4 h-4 text-red-600"})})]}),(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-4",children:[(0,d.jsxs)("div",{className:"md:col-span-5",children:[(0,d.jsx)(j.J,{children:"รายละเอียด / Description"}),(0,d.jsx)(i.p,{value:a.description,onChange:b=>B(a.id,"description",b.target.value),placeholder:"รายละเอียดสินค้า/บริการ",className:s[`item_${b}_description`]?"border-red-500":""})]}),(0,d.jsxs)("div",{className:"md:col-span-2",children:[(0,d.jsx)(j.J,{children:"จำนวน / Qty"}),(0,d.jsx)(i.p,{type:"number",value:a.quantity,onChange:b=>B(a.id,"quantity",Number(b.target.value)),min:"0",step:"0.01",className:s[`item_${b}_quantity`]?"border-red-500":""})]}),(0,d.jsxs)("div",{className:"md:col-span-2",children:[(0,d.jsx)(j.J,{children:"หน่วย / Unit"}),(0,d.jsx)(i.p,{value:a.unit,onChange:b=>B(a.id,"unit",b.target.value),placeholder:"ชิ้น"})]}),(0,d.jsxs)("div",{className:"md:col-span-3",children:[(0,d.jsx)(j.J,{children:"ราคา/หน่วย / Price"}),(0,d.jsx)(i.p,{type:"number",value:a.pricePerUnit,onChange:b=>B(a.id,"pricePerUnit",Number(b.target.value)),min:"0",step:"0.01",className:s[`item_${b}_price`]?"border-red-500":""})]})]}),(0,d.jsxs)("div",{className:"flex justify-between items-center pt-2 border-t",children:[(0,d.jsxs)(h.$,{type:"button",variant:"ghost",size:"sm",onClick:()=>(a=>{if(!o.items.find(b=>b.id===a))return;let b={id:crypto.randomUUID(),description:"",quantity:1,unit:"ชิ้น",pricePerUnit:0,amount:0,order:o.items.length,parentItemId:a};p(a=>({...a,items:[...a.items,b]}))})(a.id),children:[(0,d.jsx)(f.A,{className:"w-4 h-4 mr-2"}),"เพิ่มรายการย่อย"]}),(0,d.jsxs)("div",{className:"text-right",children:[(0,d.jsx)("span",{className:"text-sm text-gray-600",children:"จำนวนเงิน:"}),(0,d.jsxs)("span",{className:"ml-2 font-semibold",children:[a.amount.toLocaleString("th-TH",{minimumFractionDigits:2,maximumFractionDigits:2})," ","บาท"]})]})]}),c.length>0&&(0,d.jsx)("div",{className:"ml-8 space-y-2 border-l-2 border-blue-200 pl-4",children:c.map((a,b)=>(0,d.jsxs)("div",{className:"bg-gray-50 p-3 rounded space-y-2",children:[(0,d.jsxs)("div",{className:"flex justify-between items-start",children:[(0,d.jsxs)("span",{className:"text-sm text-gray-600",children:["รายการย่อย ",b+1]}),(0,d.jsx)(h.$,{type:"button",variant:"ghost",size:"sm",onClick:()=>A(a.id),children:(0,d.jsx)(g.A,{className:"w-3 h-3 text-red-600"})})]}),(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-2",children:[(0,d.jsx)("div",{className:"md:col-span-5",children:(0,d.jsx)(i.p,{value:a.description,onChange:b=>B(a.id,"description",b.target.value),placeholder:"รายละเอียดรายการย่อย",className:"text-sm"})}),(0,d.jsx)("div",{className:"md:col-span-2",children:(0,d.jsx)(i.p,{type:"number",value:a.quantity,onChange:b=>B(a.id,"quantity",Number(b.target.value)),min:"0",step:"0.01",className:"text-sm"})}),(0,d.jsx)("div",{className:"md:col-span-2",children:(0,d.jsx)(i.p,{value:a.unit,onChange:b=>B(a.id,"unit",b.target.value),placeholder:"ชิ้น",className:"text-sm"})}),(0,d.jsx)("div",{className:"md:col-span-3",children:(0,d.jsx)(i.p,{type:"number",value:a.pricePerUnit,onChange:b=>B(a.id,"pricePerUnit",Number(b.target.value)),min:"0",step:"0.01",className:"text-sm"})})]}),(0,d.jsxs)("div",{className:"text-right text-sm",children:[(0,d.jsx)("span",{className:"text-gray-600",children:"จำนวนเงิน:"}),(0,d.jsxs)("span",{className:"ml-2 font-semibold",children:[a.amount.toLocaleString("th-TH",{minimumFractionDigits:2,maximumFractionDigits:2})," ","บาท"]})]})]},a.id))})]},a.id)})})]}),(0,d.jsxs)("div",{className:"bg-white p-6 rounded-lg border space-y-4",children:[(0,d.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"สรุปยอดรวม / Summary"}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)("div",{className:"flex items-center justify-between",children:(0,d.jsxs)("label",{className:"flex items-center space-x-2 cursor-pointer",children:[(0,d.jsx)("input",{type:"checkbox",checked:o.hasVat,onChange:()=>{p(a=>({...a,hasVat:!a.hasVat}))},className:"rounded border-gray-300"}),(0,d.jsx)("span",{className:"text-gray-700",children:"รวม VAT 7% / Include VAT 7%"})]})}),(0,d.jsxs)("div",{className:"pt-4 space-y-2 border-t",children:[(0,d.jsxs)("div",{className:"flex justify-between text-gray-700",children:[(0,d.jsx)("span",{children:"ยอดรวม / Subtotal:"}),(0,d.jsxs)("span",{className:"font-semibold",children:[u.toLocaleString("th-TH",{minimumFractionDigits:2,maximumFractionDigits:2})," ","บาท"]})]}),o.hasVat&&(0,d.jsxs)("div",{className:"flex justify-between text-gray-700",children:[(0,d.jsx)("span",{children:"VAT 7%:"}),(0,d.jsxs)("span",{className:"font-semibold",children:[v.toLocaleString("th-TH",{minimumFractionDigits:2,maximumFractionDigits:2})," ","บาท"]})]}),(0,d.jsxs)("div",{className:"flex justify-between text-lg font-bold text-gray-900 pt-2 border-t",children:[(0,d.jsx)("span",{children:"รวมทั้งสิ้น / Total:"}),(0,d.jsxs)("span",{children:[w.toLocaleString("th-TH",{minimumFractionDigits:2,maximumFractionDigits:2})," ","บาท"]})]}),(0,d.jsxs)("div",{className:"text-sm text-gray-600 text-right",children:["(",x,")"]})]})]})]}),(0,d.jsxs)("div",{className:"bg-white p-6 rounded-lg border space-y-4",children:[(0,d.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"หมายเหตุ / Notes"}),(0,d.jsx)(k.f,{name:"notes",value:o.notes,onChange:y,placeholder:"หมายเหตุเพิ่มเติม...",rows:3})]}),(0,d.jsxs)("div",{className:"bg-white p-6 rounded-lg border space-y-4",children:[(0,d.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"ลายเซ็น / Signature"}),(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)(j.J,{htmlFor:"signatureName",children:"ชื่อผู้รับเงิน / Receiver Name"}),(0,d.jsx)(i.p,{id:"signatureName",name:"signatureName",value:o.signatureName,onChange:y,placeholder:"นายสมชาย ใจดี"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)(j.J,{htmlFor:"signatureTitle",children:"ตำแหน่ง / Position"}),(0,d.jsx)(i.p,{id:"signatureTitle",name:"signatureTitle",value:o.signatureTitle,onChange:y,placeholder:"ผู้จัดการ"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)(j.J,{htmlFor:"signatureUrl",children:"URL ลายเซ็น / Signature URL"}),(0,d.jsx)(i.p,{id:"signatureUrl",name:"signatureUrl",value:o.signatureUrl,onChange:y,placeholder:"https://..."})]})]})]}),s.submit&&(0,d.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-800 px-4 py-3 rounded",children:s.submit}),(0,d.jsx)("div",{className:"flex gap-4 pt-4",children:(0,d.jsx)(h.$,{type:"submit",disabled:q,className:"flex-1",size:"lg",children:q?m?"กำลังอัพเดท... / Updating...":"กำลังบันทึก... / Saving...":m?"อัพเดทใบเสร็จ / Update Receipt":"สร้างใบเสร็จ / Create Receipt"})})]})}},63287:(a,b,c)=>{"use strict";c.d(b,{f:()=>e});var d=c(21124);function e({label:a,error:b,helperText:c,required:e,className:f="",id:g,...h}){let i=g||`textarea-${a?.toLowerCase().replace(/\s+/g,"-")}`,j=`
    w-full px-3 py-2 border rounded-lg
    focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent
    disabled:bg-gray-100 disabled:cursor-not-allowed
    ${b?"border-red-500 focus:ring-red-500":"border-gray-300"}
    ${f}
  `.trim().replace(/\s+/g," ");return(0,d.jsxs)("div",{className:"w-full",children:[a&&(0,d.jsxs)("label",{htmlFor:i,className:"block text-sm font-medium text-gray-700 mb-1",children:[a,e&&(0,d.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]}),(0,d.jsx)("textarea",{id:i,className:j,"aria-invalid":b?"true":"false","aria-describedby":b?`${i}-error`:c?`${i}-helper`:void 0,...h}),b&&(0,d.jsx)("p",{id:`${i}-error`,className:"mt-1 text-sm text-red-600",children:b}),!b&&c&&(0,d.jsx)("p",{id:`${i}-helper`,className:"mt-1 text-sm text-gray-500",children:c})]})}c(38301)},64404:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"notFound",{enumerable:!0,get:function(){return e}});let d=""+c(98541).HTTP_ERROR_FALLBACK_ERROR_CODE+";404";function e(){let a=Object.defineProperty(Error(d),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});throw a.digest=d,a}("function"==typeof b.default||"object"==typeof b.default&&null!==b.default)&&void 0===b.default.__esModule&&(Object.defineProperty(b.default,"__esModule",{value:!0}),Object.assign(b.default,b),a.exports=b.default)},64712:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"unstable_rethrow",{enumerable:!0,get:function(){return d}});let d=c(25799).unstable_rethrow;("function"==typeof b.default||"object"==typeof b.default&&null!==b.default)&&void 0===b.default.__esModule&&(Object.defineProperty(b.default,"__esModule",{value:!0}),Object.assign(b.default,b),a.exports=b.default)},65169:(a,b,c)=>{let{createProxy:d}=c(39893);a.exports=d("/Users/gab_mbam4/Documents/rocketlab/quotation-generator/node_modules/next/dist/client/app-dir/link.js")},67837:(a,b,c)=>{"use strict";function d(){throw Object.defineProperty(Error("`forbidden()` is experimental and only allowed to be enabled when `experimental.authInterrupts` is enabled."),"__NEXT_ERROR_CODE",{value:"E488",enumerable:!1,configurable:!0})}Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"forbidden",{enumerable:!0,get:function(){return d}}),c(98541).HTTP_ERROR_FALLBACK_ERROR_CODE,("function"==typeof b.default||"object"==typeof b.default&&null!==b.default)&&void 0===b.default.__esModule&&(Object.defineProperty(b.default,"__esModule",{value:!0}),Object.assign(b.default,b),a.exports=b.default)},70373:(a,b,c)=>{"use strict";c.d(b,{z:()=>e});var d=c(96330);let e=globalThis.prisma??new d.PrismaClient({log:["error"]})},71759:(a,b,c)=>{"use strict";c.d(b,{J:()=>e});var d=c(21124);function e({className:a="",children:b,...c}){return(0,d.jsx)("label",{className:`block text-sm font-medium text-gray-700 mb-1 ${a}`.trim(),...c,children:b})}c(38301)},76828:(a,b,c)=>{"use strict";c.d(b,{default:()=>d});let d=(0,c(97954).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/gab_mbam4/Documents/rocketlab/quotation-generator/components/ReceiptForm.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/gab_mbam4/Documents/rocketlab/quotation-generator/components/ReceiptForm.tsx","default")},82161:(a,b,c)=>{"use strict";var d=c(93045);c.o(d,"notFound")&&c.d(b,{notFound:function(){return d.notFound}}),c.o(d,"redirect")&&c.d(b,{redirect:function(){return d.redirect}})},85400:(a,b,c)=>{"use strict";c.d(b,{DG:()=>m,fp:()=>i,fs:()=>j,k4:()=>h,mc:()=>k,qH:()=>l,z6:()=>g});var d=c(75879);c(68633);var e=c(16780),f=c(70373);async function g(){let a=new Date,b=a.getFullYear(),c=String(a.getMonth()+1).padStart(2,"0"),d=new Date(b,a.getMonth(),1),e=new Date(b,a.getMonth()+1,0,23,59,59),g=await f.z.receipt.findFirst({where:{createdAt:{gte:d,lte:e}},orderBy:{createdAt:"desc"}}),h=1;if(g&&g.receiptNumber){let a=g.receiptNumber.match(/RCP-\d{6}-(\d{4})/);a&&(h=parseInt(a[1],10)+1)}let i=String(h).padStart(4,"0");return`RCP-${b}${c}-${i}`}async function h(a=1,b=20){try{let[c,d]=await Promise.all([f.z.receipt.findMany({where:{deletedAt:null},include:{company:!0,items:{where:{parentItemId:null},include:{subItems:!0},orderBy:{order:"asc"}}},orderBy:{createdAt:"desc"},skip:(a-1)*b,take:b}),f.z.receipt.count({where:{deletedAt:null}})]);return{success:!0,data:c,pagination:{page:a,limit:b,total:d,totalPages:Math.ceil(d/b)}}}catch(a){return console.error("Error fetching receipts:",a),{success:!1,error:"Failed to fetch receipts"}}}async function i(a){try{let b=await f.z.receipt.findUnique({where:{id:a,deletedAt:null},include:{company:!0,items:{where:{parentItemId:null},include:{subItems:{orderBy:{order:"asc"}}},orderBy:{order:"asc"}}}});if(!b)return{success:!1,error:"Receipt not found"};return{success:!0,data:b}}catch(a){return console.error("Error fetching receipt:",a),{success:!1,error:"Failed to fetch receipt"}}}async function j(a){try{let b=await g(),c=a.items.reduce((a,b)=>b.parentItemId?a:a+b.amount,0),d=a.hasVat?.07*c:0,h="string"==typeof a.issueDate?new Date(a.issueDate):a.issueDate,i=a.paymentDate?"string"==typeof a.paymentDate?new Date(a.paymentDate):a.paymentDate:h,j=a.items.filter(a=>!a.parentItemId),k=await f.z.receipt.create({data:{receiptNumber:b,companyId:a.companyId,customerName:a.customerName,customerAddress:a.customerAddress,customerTaxId:a.customerTaxId,customerPhone:a.customerPhone,issueDate:h,paymentMethod:a.paymentMethod,paymentDate:i,subtotal:c,vatAmount:d,total:c+d,hasVat:a.hasVat,notes:a.notes,language:a.language,signatureUrl:a.signatureUrl,signatureName:a.signatureName,signatureTitle:a.signatureTitle,items:{create:j.map(a=>({description:a.description,quantity:a.quantity,unit:a.unit,pricePerUnit:a.pricePerUnit,amount:a.amount,order:a.order}))}},include:{items:!0}}),l=a.items.filter(a=>a.parentItemId);if(l.length>0){let a=new Map;for(let b of(j.forEach((b,c)=>{a.set(b.id,k.items[c].id)}),l)){let c=a.get(b.parentItemId);c&&await f.z.receiptItem.create({data:{receiptId:k.id,description:b.description,quantity:b.quantity,unit:b.unit,pricePerUnit:b.pricePerUnit,amount:b.amount,order:b.order,parentItemId:c}})}}return(0,e.revalidatePath)("/receipt"),{success:!0,data:k}}catch(a){return console.error("Error creating receipt:",a),{success:!1,error:"Failed to create receipt"}}}async function k(a,b){try{let c=b.items.reduce((a,b)=>b.parentItemId?a:a+b.amount,0),d=b.hasVat?.07*c:0,g="string"==typeof b.issueDate?new Date(b.issueDate):b.issueDate,h=b.paymentDate?"string"==typeof b.paymentDate?new Date(b.paymentDate):b.paymentDate:g;await f.z.receiptItem.deleteMany({where:{receiptId:a}});let i=b.items.filter(a=>!a.parentItemId),j=await f.z.receipt.update({where:{id:a},data:{companyId:b.companyId,customerName:b.customerName,customerAddress:b.customerAddress,customerTaxId:b.customerTaxId,customerPhone:b.customerPhone,issueDate:g,paymentMethod:b.paymentMethod,paymentDate:h,subtotal:c,vatAmount:d,total:c+d,hasVat:b.hasVat,notes:b.notes,language:b.language,signatureUrl:b.signatureUrl,signatureName:b.signatureName,signatureTitle:b.signatureTitle,items:{create:i.map(a=>({description:a.description,quantity:a.quantity,unit:a.unit,pricePerUnit:a.pricePerUnit,amount:a.amount,order:a.order}))}},include:{items:!0}}),k=b.items.filter(a=>a.parentItemId);if(k.length>0){let a=new Map;for(let b of(i.forEach((b,c)=>{a.set(b.id,j.items[c].id)}),k)){let c=a.get(b.parentItemId);c&&await f.z.receiptItem.create({data:{receiptId:j.id,description:b.description,quantity:b.quantity,unit:b.unit,pricePerUnit:b.pricePerUnit,amount:b.amount,order:b.order,parentItemId:c}})}}return(0,e.revalidatePath)("/receipt"),(0,e.revalidatePath)(`/receipt/${a}`),{success:!0,data:j}}catch(a){return console.error("Error updating receipt:",a),{success:!1,error:"Failed to update receipt"}}}async function l(a){try{let b=await f.z.receipt.update({where:{id:a},data:{deletedAt:new Date}});return(0,e.revalidatePath)("/receipt"),{success:!0,data:b}}catch(a){return console.error("Error deleting receipt:",a),{success:!1,error:"Failed to delete receipt"}}}async function m(a){try{let b=await f.z.receipt.update({where:{id:a},data:{deletedAt:null}});return(0,e.revalidatePath)("/receipt"),{success:!0,data:b}}catch(a){return console.error("Error restoring receipt:",a),{success:!1,error:"Failed to restore receipt"}}}(0,c(51669).D)([g,h,i,j,k,l,m]),(0,d.A)(g,"0063351c7d026acd5d9f4ac279ece72538e31b06ce",null),(0,d.A)(h,"6060d1807581316dbe8b85fd73844b202f84a1791a",null),(0,d.A)(i,"4098a28b67bb1a44a6fb4150c7df40d4608afaf880",null),(0,d.A)(j,"409dec1cfe2fb6bb687d16d75266d9cfa1dfaf6493",null),(0,d.A)(k,"602af3c9979ef2c662b66228125165b07d1324a27c",null),(0,d.A)(l,"40cea971fdc0746ad541d42dc45e8be4d20bef581e",null),(0,d.A)(m,"407e540d0034ba9122436dc16ac4f881b9ad16f3a6",null)},93045:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),!function(a,b){for(var c in b)Object.defineProperty(a,c,{enumerable:!0,get:b[c]})}(b,{ReadonlyURLSearchParams:function(){return k},RedirectType:function(){return e.RedirectType},forbidden:function(){return g.forbidden},notFound:function(){return f.notFound},permanentRedirect:function(){return d.permanentRedirect},redirect:function(){return d.redirect},unauthorized:function(){return h.unauthorized},unstable_isUnrecognizedActionError:function(){return l},unstable_rethrow:function(){return i.unstable_rethrow}});let d=c(47614),e=c(92781),f=c(64404),g=c(67837),h=c(29088),i=c(64712);class j extends Error{constructor(){super("Method unavailable on `ReadonlyURLSearchParams`. Read more: https://nextjs.org/docs/app/api-reference/functions/use-search-params#updating-searchparams")}}class k extends URLSearchParams{append(){throw new j}delete(){throw new j}set(){throw new j}sort(){throw new j}}function l(){throw Object.defineProperty(Error("`unstable_isUnrecognizedActionError` can only be used on the client."),"__NEXT_ERROR_CODE",{value:"E776",enumerable:!1,configurable:!0})}("function"==typeof b.default||"object"==typeof b.default&&null!==b.default)&&void 0===b.default.__esModule&&(Object.defineProperty(b.default,"__esModule",{value:!0}),Object.assign(b.default,b),a.exports=b.default)},97489:(a,b,c)=>{"use strict";c.d(b,{Vn:()=>f,hj:()=>h});let d=["","หนึ่ง","สอง","สาม","สี่","ห้า","หก","เจ็ด","แปด","เก้า"],e=["","สิบ","ร้อย","พัน","หมื่น","แสน","ล้าน"];function f(a){if(0===a)return"ศูนย์บาทถ้วน";if(a<0)return"ลบ"+f(Math.abs(a));let b=Math.floor(a),c=Math.round((a-b)*100),d="";return b>0&&(d=g(b)+"บาท"),c>0?d+=g(c)+"สตางค์":d+="ถ้วน",d}function g(a){if(0===a)return"";if(a>=1e6){let b=Math.floor(a/1e6),c=a%1e6;return g(b)+"ล้าน"+g(c)}let b="",c=a.toString().split("").map(Number),f=c.length;for(let a=0;a<f;a++){let g=c[a],h=f-a;if(0!==g){if(2===h&&1===g&&2===f){b+="สิบ";continue}if(1===h&&1===g&&f>1){b+="เอ็ด";continue}if(2===h&&2===g){b+="ยี่สิบ";continue}b+=d[g],h>1&&h<=6&&(b+=e[h-1])}}return b}function h(a){return`(${f(a)})`}}};