"use strict";exports.id=8966,exports.ids=[8966],exports.modules={22519:(a,b,c)=>{c.d(b,{QuotationForm:()=>o});var d=c(21124),e=c(38301),f=c(42378),g=c(90145),h=c(85708);let i=(0,h.createServerReference)("40592cf63791fbf1c24959648485218fa71d9e7a6b",h.callServer,void 0,h.findSourceMapURL,"createQuotation");var j=c(97489),k=c(8849),l=c(40284),m=c(85351),n=c(59405);function o({companies:a,defaultCompanyId:b,editMode:c=!1,initialData:h}){let o=(0,f.useRouter)(),[p,q]=(0,e.useState)(!1),[r,s]=(0,e.useState)({}),[t,u]=(0,e.useState)(new Set),v=new Date,w=new Date(v);w.setDate(v.getDate()+30);let[x,y]=(0,e.useState)(()=>h?{...h,issueDate:"string"==typeof h.issueDate?h.issueDate:new Date(h.issueDate).toISOString().split("T")[0],validUntil:"string"==typeof h.validUntil?h.validUntil:new Date(h.validUntil).toISOString().split("T")[0]}:{companyId:b||a[0]?.id||"",customerName:"",customerAddress:"",customerTaxId:"",customerPhone:"",issueDate:v.toISOString().split("T")[0],validUntil:w.toISOString().split("T")[0],items:[{id:crypto.randomUUID(),description:"",quantity:1,unit:"ชิ้น",pricePerUnit:0,amount:0,order:0,subItems:[]}],hasVat:!0,notes:"",language:"th"}),z=x.items.reduce((a,b)=>a+b.amount,0),A=x.hasVat?.07*z:0,B=z+A,C=(0,j.Vn)(B),D=(a,b)=>{y(c=>({...c,[a]:b})),r[a]&&s(b=>{let c={...b};return delete c[a],c})},E=(a,b,c)=>{y(d=>({...d,items:d.items.map(d=>{if(d.id===a){let a={...d,[b]:c};return("quantity"===b||"pricePerUnit"===b)&&(a.amount=a.quantity*a.pricePerUnit),a}return d})}))},F=(a,b,c,d)=>{y(e=>({...e,items:e.items.map(e=>e.id===a&&e.subItems?{...e,subItems:e.subItems.map(a=>{if(a.id===b){let b={...a,[c]:d};return("quantity"===c||"pricePerUnit"===c)&&(b.amount=b.quantity*b.pricePerUnit),b}return a})}:e)}))},G=async a=>{a.preventDefault(),q(!0),s({});try{let a=await i(x);a.success&&a.data?o.push(`/quotation/${a.data.id}`):(s({form:a.error||"Failed to create quotation"}),q(!1))}catch(a){console.error("Error submitting form:",a),s({form:"An unexpected error occurred"}),q(!1)}};return(0,d.jsxs)("form",{onSubmit:G,className:"space-y-6",children:[r.form&&(0,d.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:r.form}),(0,d.jsx)(g.Zp,{title:"ข้อมูลบริษัท / Company Information",children:(0,d.jsx)(g.l6,{label:"บริษัท / Company",value:x.companyId,onChange:a=>D("companyId",a.target.value),options:a.map(a=>({value:a.id,label:a.name})),required:!0,error:r.companyId})}),(0,d.jsxs)(g.Zp,{title:"ข้อมูลลูกค้า / Customer Information",children:[(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,d.jsx)(g.pd,{label:"ชื่อลูกค้า / Customer Name",value:x.customerName,onChange:a=>D("customerName",a.target.value),placeholder:"บริษัท ABC จำกัด",required:!0,error:r.customerName}),(0,d.jsx)(g.pd,{label:"เลขประจำตัวผู้เสียภาษี / Tax ID",value:x.customerTaxId,onChange:a=>D("customerTaxId",a.target.value),placeholder:"0000000000000",error:r.customerTaxId})]}),(0,d.jsx)(g.fs,{label:"ที่อยู่ / Address",value:x.customerAddress,onChange:a=>D("customerAddress",a.target.value),placeholder:"123 ถนนสุขุมวิท แขวงคลองเตย เขตคลองเตย กรุงเทพฯ 10110",required:!0,rows:3,error:r.customerAddress}),(0,d.jsx)(g.pd,{label:"เบอร์โทรศัพท์ / Phone",value:x.customerPhone,onChange:a=>D("customerPhone",a.target.value),placeholder:"02-123-4567",type:"tel",error:r.customerPhone})]}),(0,d.jsx)(g.Zp,{title:"ข้อมูลเอกสาร / Document Information",children:(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,d.jsx)(g.pd,{label:"วันที่ / Issue Date",type:"date",value:String(x.issueDate),onChange:a=>D("issueDate",a.target.value),required:!0,error:r.issueDate}),(0,d.jsx)(g.pd,{label:"ใช้ได้ถึงวันที่ / Valid Until",type:"date",value:String(x.validUntil),onChange:a=>D("validUntil",a.target.value),required:!0,error:r.validUntil})]})}),(0,d.jsx)(g.Zp,{title:"รายการสินค้า/บริการ / Items",headerAction:(0,d.jsxs)(g.$n,{type:"button",size:"sm",onClick:()=>{let a={id:crypto.randomUUID(),description:"",quantity:1,unit:"ชิ้น",pricePerUnit:0,amount:0,order:x.items.length,subItems:[]};y(b=>({...b,items:[...b.items,a]}))},children:[(0,d.jsx)(k.A,{className:"w-4 h-4 mr-2"}),"เพิ่มรายการ"]}),children:(0,d.jsx)("div",{className:"space-y-4",children:x.items.map((a,b)=>(0,d.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4 bg-gray-50",children:[(0,d.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,d.jsxs)("h4",{className:"font-medium text-gray-900",children:["รายการที่ ",b+1]}),(0,d.jsx)("div",{className:"flex items-center gap-2",children:x.items.length>1&&(0,d.jsx)(g.$n,{type:"button",variant:"danger",size:"sm",onClick:()=>{var b;return b=a.id,void y(a=>({...a,items:a.items.filter(a=>a.id!==b)}))},children:(0,d.jsx)(l.A,{className:"w-4 h-4"})})})]}),(0,d.jsxs)("div",{className:"space-y-3",children:[(0,d.jsx)(g.fs,{label:"รายละเอียด / Description",value:a.description,onChange:b=>E(a.id,"description",b.target.value),placeholder:"อธิบายรายละเอียดสินค้า/บริการ",required:!0,rows:2}),(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[(0,d.jsx)(g.pd,{label:"จำนวน / Quantity",type:"number",value:a.quantity,onChange:b=>E(a.id,"quantity",parseFloat(b.target.value)||0),min:"0",step:"0.01",required:!0}),(0,d.jsx)(g.pd,{label:"หน่วย / Unit",value:a.unit,onChange:b=>E(a.id,"unit",b.target.value),placeholder:"ชิ้น",required:!0}),(0,d.jsx)(g.pd,{label:"ราคา/หน่วย / Price/Unit",type:"number",value:a.pricePerUnit,onChange:b=>E(a.id,"pricePerUnit",parseFloat(b.target.value)||0),min:"0",step:"0.01",required:!0}),(0,d.jsx)(g.pd,{label:"จำนวนเงิน / Amount",type:"number",value:a.amount.toFixed(2),disabled:!0,className:"bg-gray-100"})]}),(0,d.jsxs)("div",{className:"mt-3",children:[(0,d.jsxs)(g.$n,{type:"button",variant:"ghost",size:"sm",onClick:()=>(a=>{let b={id:crypto.randomUUID(),description:"",quantity:1,unit:"ชิ้น",pricePerUnit:0,amount:0,order:0,parentItemId:a};y(c=>({...c,items:c.items.map(c=>c.id===a?{...c,subItems:[...c.subItems||[],b]}:c)})),u(b=>new Set(b).add(a))})(a.id),children:[(0,d.jsx)(k.A,{className:"w-4 h-4 mr-2"}),"เพิ่มรายการย่อย"]}),a.subItems&&a.subItems.length>0&&(0,d.jsxs)("div",{className:"mt-3 space-y-2",children:[(0,d.jsxs)("button",{type:"button",onClick:()=>{var b;return b=a.id,void u(a=>{let c=new Set(a);return c.has(b)?c.delete(b):c.add(b),c})},className:"flex items-center text-sm text-gray-600 hover:text-gray-900",children:[t.has(a.id)?(0,d.jsx)(m.A,{className:"w-4 h-4 mr-1"}):(0,d.jsx)(n.A,{className:"w-4 h-4 mr-1"}),"รายการย่อย (",a.subItems.length,")"]}),t.has(a.id)&&(0,d.jsx)("div",{className:"ml-6 space-y-3 border-l-2 border-gray-300 pl-4",children:a.subItems.map((b,c)=>(0,d.jsxs)("div",{className:"bg-white p-3 rounded border border-gray-200",children:[(0,d.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,d.jsxs)("span",{className:"text-sm font-medium text-gray-700",children:["รายการย่อยที่ ",c+1]}),(0,d.jsx)(g.$n,{type:"button",variant:"danger",size:"sm",onClick:()=>{var c,d;return c=a.id,d=b.id,void y(a=>({...a,items:a.items.map(a=>a.id===c&&a.subItems?{...a,subItems:a.subItems.filter(a=>a.id!==d)}:a)}))},children:(0,d.jsx)(l.A,{className:"w-4 h-4"})})]}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(g.pd,{label:"รายละเอียด",value:b.description,onChange:c=>F(a.id,b.id,"description",c.target.value),placeholder:"รายละเอียดย่อย",required:!0}),(0,d.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,d.jsx)(g.pd,{label:"จำนวน",type:"number",value:b.quantity,onChange:c=>F(a.id,b.id,"quantity",parseFloat(c.target.value)||0),min:"0",step:"0.01",required:!0}),(0,d.jsx)(g.pd,{label:"หน่วย",value:b.unit,onChange:c=>F(a.id,b.id,"unit",c.target.value),placeholder:"ชิ้น",required:!0})]})]})]},b.id))})]})]})]})]},a.id))})}),(0,d.jsx)(g.Zp,{title:"สรุปยอดรวม / Summary",children:(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between py-2 border-b",children:[(0,d.jsx)("span",{className:"text-gray-700",children:"ยอดรวม / Subtotal:"}),(0,d.jsxs)("span",{className:"font-semibold text-lg",children:[z.toLocaleString("th-TH",{minimumFractionDigits:2,maximumFractionDigits:2})," ","บาท"]})]}),(0,d.jsxs)("div",{className:"flex items-center gap-3",children:[(0,d.jsx)("input",{type:"checkbox",id:"hasVat",checked:x.hasVat,onChange:a=>D("hasVat",a.target.checked),className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),(0,d.jsx)("label",{htmlFor:"hasVat",className:"text-gray-700",children:"รวมภาษีมูลค่าเพิ่ม 7% / Include VAT 7%"})]}),x.hasVat&&(0,d.jsxs)("div",{className:"flex items-center justify-between py-2 border-b",children:[(0,d.jsx)("span",{className:"text-gray-700",children:"ภาษีมูลค่าเพิ่ม 7% / VAT 7%:"}),(0,d.jsxs)("span",{className:"font-semibold",children:[A.toLocaleString("th-TH",{minimumFractionDigits:2,maximumFractionDigits:2})," ","บาท"]})]}),(0,d.jsxs)("div",{className:"flex items-center justify-between py-3 border-t-2 border-gray-300",children:[(0,d.jsx)("span",{className:"text-lg font-bold text-gray-900",children:"รวมทั้งสิ้น / Total:"}),(0,d.jsxs)("span",{className:"text-2xl font-bold text-blue-600",children:[B.toLocaleString("th-TH",{minimumFractionDigits:2,maximumFractionDigits:2})," ","บาท"]})]}),(0,d.jsxs)("div",{className:"bg-blue-50 p-3 rounded-lg",children:[(0,d.jsx)("p",{className:"text-sm text-gray-700 mb-1",children:"ตัวอักษร / In Words:"}),(0,d.jsx)("p",{className:"font-medium text-gray-900",children:C})]})]})}),(0,d.jsx)(g.Zp,{title:"หมายเหตุ / Notes (Optional)",children:(0,d.jsx)(g.fs,{value:x.notes||"",onChange:a=>D("notes",a.target.value),placeholder:"หมายเหตุเพิ่มเติม...",rows:3})}),(0,d.jsxs)("div",{className:"flex items-center justify-end gap-4 pt-6 border-t",children:[(0,d.jsx)(g.$n,{type:"button",variant:"ghost",onClick:()=>o.back(),disabled:p,children:"ยกเลิก / Cancel"}),(0,d.jsx)(g.$n,{type:"submit",isLoading:p,disabled:p,children:p?"กำลังบันทึก...":"บันทึกใบเสนอราคา / Save Quotation"})]})]})}},43693:(a,b,c)=>{c.d(b,{p:()=>e});var d=c(21124);function e({label:a,error:b,helperText:c,required:e,className:f="",id:g,...h}){let i=g||`input-${a?.toLowerCase().replace(/\s+/g,"-")}`,j=`
    w-full px-3 py-2 border rounded-lg
    focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent
    disabled:bg-gray-100 disabled:cursor-not-allowed
    ${b?"border-red-500 focus:ring-red-500":"border-gray-300"}
    ${f}
  `.trim().replace(/\s+/g," ");return(0,d.jsxs)("div",{className:"w-full",children:[a&&(0,d.jsxs)("label",{htmlFor:i,className:"block text-sm font-medium text-gray-700 mb-1",children:[a,e&&(0,d.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]}),(0,d.jsx)("input",{id:i,className:j,"aria-invalid":b?"true":"false","aria-describedby":b?`${i}-error`:c?`${i}-helper`:void 0,...h}),b&&(0,d.jsx)("p",{id:`${i}-error`,className:"mt-1 text-sm text-red-600",children:b}),!b&&c&&(0,d.jsx)("p",{id:`${i}-helper`,className:"mt-1 text-sm text-gray-500",children:c})]})}c(38301)},46737:(a,b,c)=>{c.d(b,{$:()=>e});var d=c(21124);function e({variant:a="primary",size:b="md",isLoading:c=!1,children:e,className:f="",disabled:g,...h}){let i=`inline-flex items-center justify-center font-medium rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed ${({primary:"bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500",secondary:"bg-gray-600 text-white hover:bg-gray-700 focus:ring-gray-500",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500",ghost:"bg-transparent text-gray-700 hover:bg-gray-100 focus:ring-gray-500 border border-gray-300"})[a]} ${({sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-base",lg:"px-6 py-3 text-lg"})[b]} ${f}`.trim();return(0,d.jsx)("button",{className:i,disabled:g||c,...h,children:c?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,d.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,d.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Loading..."]}):e})}c(38301)},63287:(a,b,c)=>{c.d(b,{f:()=>e});var d=c(21124);function e({label:a,error:b,helperText:c,required:e,className:f="",id:g,...h}){let i=g||`textarea-${a?.toLowerCase().replace(/\s+/g,"-")}`,j=`
    w-full px-3 py-2 border rounded-lg
    focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent
    disabled:bg-gray-100 disabled:cursor-not-allowed
    ${b?"border-red-500 focus:ring-red-500":"border-gray-300"}
    ${f}
  `.trim().replace(/\s+/g," ");return(0,d.jsxs)("div",{className:"w-full",children:[a&&(0,d.jsxs)("label",{htmlFor:i,className:"block text-sm font-medium text-gray-700 mb-1",children:[a,e&&(0,d.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]}),(0,d.jsx)("textarea",{id:i,className:j,"aria-invalid":b?"true":"false","aria-describedby":b?`${i}-error`:c?`${i}-helper`:void 0,...h}),b&&(0,d.jsx)("p",{id:`${i}-error`,className:"mt-1 text-sm text-red-600",children:b}),!b&&c&&(0,d.jsx)("p",{id:`${i}-helper`,className:"mt-1 text-sm text-gray-500",children:c})]})}c(38301)},70373:(a,b,c)=>{c.d(b,{z:()=>e});var d=c(96330);let e=globalThis.prisma??new d.PrismaClient({log:["error"]})},71759:(a,b,c)=>{c.d(b,{J:()=>e});var d=c(21124);function e({className:a="",children:b,...c}){return(0,d.jsx)("label",{className:`block text-sm font-medium text-gray-700 mb-1 ${a}`.trim(),...c,children:b})}c(38301)},90145:(a,b,c)=>{c.d(b,{$n:()=>d.$,Zp:()=>i,yj:()=>j,pd:()=>e.p,JU:()=>k.J,l6:()=>g,fs:()=>h.f});var d=c(46737),e=c(43693),f=c(21124);function g({label:a,error:b,helperText:c,required:d,options:e,placeholder:g,className:h="",id:i,...j}){let k=i||`select-${a?.toLowerCase().replace(/\s+/g,"-")}`,l=`
    w-full px-3 py-2 border rounded-lg
    focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent
    disabled:bg-gray-100 disabled:cursor-not-allowed
    ${b?"border-red-500 focus:ring-red-500":"border-gray-300"}
    ${h}
  `.trim().replace(/\s+/g," ");return(0,f.jsxs)("div",{className:"w-full",children:[a&&(0,f.jsxs)("label",{htmlFor:k,className:"block text-sm font-medium text-gray-700 mb-1",children:[a,d&&(0,f.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]}),(0,f.jsxs)("select",{id:k,className:l,"aria-invalid":b?"true":"false","aria-describedby":b?`${k}-error`:c?`${k}-helper`:void 0,...j,children:[g&&(0,f.jsx)("option",{value:"",disabled:!0,children:g}),e.map(a=>(0,f.jsx)("option",{value:a.value,children:a.label},a.value))]}),b&&(0,f.jsx)("p",{id:`${k}-error`,className:"mt-1 text-sm text-red-600",children:b}),!b&&c&&(0,f.jsx)("p",{id:`${k}-helper`,className:"mt-1 text-sm text-gray-500",children:c})]})}c(38301);var h=c(63287);function i({children:a,className:b="",padding:c="md",title:d,subtitle:e,headerAction:g}){let h=`
    bg-white rounded-lg border border-gray-200 shadow-sm
    ${b}
  `.trim().replace(/\s+/g," ");return(0,f.jsxs)("div",{className:h,children:[(d||e||g)&&(0,f.jsx)("div",{className:`border-b border-gray-200 ${"none"!==c?"px-6 py-4":""}`,children:(0,f.jsxs)("div",{className:"flex items-start justify-between",children:[(0,f.jsxs)("div",{children:[d&&(0,f.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:d}),e&&(0,f.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:e})]}),g&&(0,f.jsx)("div",{className:"ml-4 flex-shrink-0",children:g})]})}),(0,f.jsx)("div",{className:{none:"",sm:"p-4",md:"p-6",lg:"p-8"}[c],children:a})]})}function j({children:a,className:b="",title:c}){return(0,f.jsxs)("div",{className:`space-y-4 ${b}`.trim(),children:[c&&(0,f.jsx)("h4",{className:"text-md font-medium text-gray-900",children:c}),a]})}var k=c(71759)},96378:(a,b,c)=>{c.d(b,{QuotationForm:()=>d});let d=(0,c(97954).registerClientReference)(function(){throw Error("Attempted to call QuotationForm() from the server but QuotationForm is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/gab_mbam4/Documents/rocketlab/quotation-generator/components/QuotationForm.tsx","QuotationForm")},97489:(a,b,c)=>{c.d(b,{Vn:()=>f,hj:()=>h});let d=["","หนึ่ง","สอง","สาม","สี่","ห้า","หก","เจ็ด","แปด","เก้า"],e=["","สิบ","ร้อย","พัน","หมื่น","แสน","ล้าน"];function f(a){if(0===a)return"ศูนย์บาทถ้วน";if(a<0)return"ลบ"+f(Math.abs(a));let b=Math.floor(a),c=Math.round((a-b)*100),d="";return b>0&&(d=g(b)+"บาท"),c>0?d+=g(c)+"สตางค์":d+="ถ้วน",d}function g(a){if(0===a)return"";if(a>=1e6){let b=Math.floor(a/1e6),c=a%1e6;return g(b)+"ล้าน"+g(c)}let b="",c=a.toString().split("").map(Number),f=c.length;for(let a=0;a<f;a++){let g=c[a],h=f-a;if(0!==g){if(2===h&&1===g&&2===f){b+="สิบ";continue}if(1===h&&1===g&&f>1){b+="เอ็ด";continue}if(2===h&&2===g){b+="ยี่สิบ";continue}b+=d[g],h>1&&h<=6&&(b+=e[h-1])}}return b}function h(a){return`(${f(a)})`}}};