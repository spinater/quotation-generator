exports.id=387,exports.ids=[387],exports.modules={4564:(a,b,c)=>{Promise.resolve().then(c.bind(c,53475)),Promise.resolve().then(c.bind(c,87429))},16953:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>h,metadata:()=>g});var d=c(75338);c(82704);var e=c(87429),f=c(53475);let g={title:"Thai Quotation & Receipt Generator",description:"Generate professional Thai quotations and receipts with PDF export",keywords:["quotation","receipt","Thai","PDF","invoice","ใบเสนอราคา","ใบเสร็จรับเงิน"]};function h({children:a}){return(0,d.jsx)("html",{lang:"th",children:(0,d.jsx)("body",{className:"min-h-screen bg-gray-50 antialiased",children:(0,d.jsx)(e.AuthProvider,{children:(0,d.jsxs)("div",{className:"flex flex-col min-h-screen",children:[(0,d.jsx)(f.default,{}),(0,d.jsx)("main",{className:"flex-1",children:a}),(0,d.jsx)("footer",{className:"bg-white border-t border-gray-200 mt-auto",children:(0,d.jsx)("div",{className:"container mx-auto px-4 py-6",children:(0,d.jsxs)("p",{className:"text-center text-sm text-gray-500",children:["\xa9 ",new Date().getFullYear()," Thai Quotation & Receipt Generator"]})})})]})})})})}},34167:(a,b,c)=>{"use strict";c.d(b,{As:()=>i,AuthProvider:()=>h,wC:()=>j});var d=c(21124),e=c(38301),f=c(42378);let g=(0,e.createContext)(void 0);function h({children:a}){let b=(0,f.useRouter)(),[c,h]=(0,e.useState)(null),[i,j]=(0,e.useState)(!0),k=(0,e.useCallback)(async()=>{try{let a=await fetch("/api/auth/me",{credentials:"include"});if(a.ok){let b=await a.json();h(b.user)}else h(null)}catch(a){console.error("Failed to fetch current user:",a),h(null)}finally{j(!1)}},[]),l=(0,e.useCallback)(async()=>{try{let a=await fetch("/api/auth/refresh",{method:"POST",credentials:"include"});if(a.ok){let b=await a.json();b.refreshed&&(console.log("Token refreshed successfully"),b.user&&h(b.user))}else console.error("Token refresh failed:",a.status),401===a.status&&(h(null),b.push("/login"))}catch(a){console.error("Failed to refresh token:",a)}},[b]),m=async(a,c)=>{j(!0);try{let d=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({email:a,password:c})});if(!d.ok){let a=await d.json();throw Error(a.error||"Login failed")}let e=await d.json();h(e.user),b.push("/"),b.refresh()}catch(a){throw j(!1),a}},n=async()=>{try{await fetch("/api/auth/logout",{method:"POST",credentials:"include"}),h(null),b.push("/login"),b.refresh()}catch(a){console.error("Logout failed:",a),h(null),b.push("/login")}},o=async()=>{await k()};return(0,d.jsx)(g.Provider,{value:{user:c,isLoading:i,isAuthenticated:!!c,login:m,logout:n,refreshUser:o,refreshToken:l},children:a})}function i(){let a=(0,e.useContext)(g);if(void 0===a)throw Error("useAuth must be used within an AuthProvider");return a}function j(){let{user:a,isLoading:b}=i();return(0,f.useRouter)(),{user:a,isLoading:b}}},46273:(a,b,c)=>{"use strict";c.d(b,{default:()=>m});var d=c(21124),e=c(3991),f=c.n(e),g=c(34167),h=c(38301),i=c(74331),j=c(10578),k=c(94684),l=c(19710);function m(){let{user:a,isAuthenticated:b,logout:c}=(0,g.As)(),[e,m]=(0,h.useState)(!1),n=(0,h.useRef)(null),o=async()=>{try{await c()}catch(a){console.error("Logout failed:",a)}};return(0,d.jsx)("header",{className:"bg-white border-b border-gray-200 shadow-sm",children:(0,d.jsx)("div",{className:"container mx-auto px-4 py-4",children:(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)(f(),{href:"/",className:"flex-1",children:[(0,d.jsx)("h1",{className:"text-2xl font-bold text-gray-900 hover:text-blue-600 transition-colors",children:"\uD83D\uDCCB Thai Quotation & Receipt Generator"}),(0,d.jsx)("p",{className:"text-sm text-gray-600",children:"ระบบสร้างใบเสนอราคาและใบเสร็จรับเงิน"})]}),b&&a?(0,d.jsxs)("div",{className:"relative",ref:n,children:[(0,d.jsxs)("button",{onClick:()=>m(!e),className:"flex items-center space-x-2 px-4 py-2 rounded-lg hover:bg-gray-100 transition-colors",children:[(0,d.jsx)("div",{className:"flex items-center justify-center w-8 h-8 bg-blue-600 text-white rounded-full font-semibold",children:a.name.charAt(0).toUpperCase()}),(0,d.jsxs)("div",{className:"text-left",children:[(0,d.jsx)("p",{className:"text-sm font-medium text-gray-900",children:a.name}),(0,d.jsx)("p",{className:"text-xs text-gray-500",children:"ADMIN"===a.role?"\uD83D\uDC51 Admin":"\uD83D\uDC64 User"})]}),(0,d.jsx)("svg",{className:`w-4 h-4 text-gray-500 transition-transform ${e?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),e&&(0,d.jsxs)("div",{className:"absolute right-0 mt-2 w-64 bg-white rounded-lg shadow-lg border border-gray-200 py-2 z-50",children:[(0,d.jsxs)("div",{className:"px-4 py-3 border-b border-gray-200",children:[(0,d.jsx)("p",{className:"text-sm font-medium text-gray-900",children:a.name}),(0,d.jsx)("p",{className:"text-xs text-gray-500",children:a.email}),(0,d.jsx)("span",{className:`inline-block mt-2 px-2 py-1 text-xs font-semibold rounded ${"ADMIN"===a.role?"bg-purple-100 text-purple-800":"bg-blue-100 text-blue-800"}`,children:"ADMIN"===a.role?"\uD83D\uDC51 Administrator":"\uD83D\uDC64 User"})]}),(0,d.jsxs)("div",{className:"py-2",children:["ADMIN"===a.role&&(0,d.jsxs)(f(),{href:"/admin/users/create",className:"flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors",onClick:()=>m(!1),children:[(0,d.jsx)(i.A,{className:"w-4 h-4 mr-3"}),"สร้างผู้ใช้ใหม่ / Create User"]}),(0,d.jsxs)(f(),{href:"/profile",className:"flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors",onClick:()=>m(!1),children:[(0,d.jsx)(j.A,{className:"w-4 h-4 mr-3"}),"โปรไฟล์ / Profile"]}),(0,d.jsxs)(f(),{href:"/settings",className:"flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors",onClick:()=>m(!1),children:[(0,d.jsx)(k.A,{className:"w-4 h-4 mr-3"}),"ตั้งค่า / Settings"]})]}),(0,d.jsx)("div",{className:"border-t border-gray-200 pt-2",children:(0,d.jsxs)("button",{onClick:o,className:"flex items-center w-full px-4 py-2 text-sm text-red-600 hover:bg-red-50 transition-colors",children:[(0,d.jsx)(l.A,{className:"w-4 h-4 mr-3"}),"ออกจากระบบ / Logout"]})})]})]}):(0,d.jsx)(f(),{href:"/login",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium",children:"เข้าสู่ระบบ / Login"})]})})})}},53475:(a,b,c)=>{"use strict";c.d(b,{default:()=>d});let d=(0,c(97954).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/gab_mbam4/Documents/rocketlab/quotation-generator/components/Header.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/gab_mbam4/Documents/rocketlab/quotation-generator/components/Header.tsx","default")},60578:(a,b,c)=>{Promise.resolve().then(c.t.bind(c,81170,23)),Promise.resolve().then(c.t.bind(c,23597,23)),Promise.resolve().then(c.t.bind(c,36893,23)),Promise.resolve().then(c.t.bind(c,89748,23)),Promise.resolve().then(c.t.bind(c,6060,23)),Promise.resolve().then(c.t.bind(c,7184,23)),Promise.resolve().then(c.t.bind(c,69576,23)),Promise.resolve().then(c.t.bind(c,73041,23)),Promise.resolve().then(c.t.bind(c,51384,23))},78730:(a,b,c)=>{Promise.resolve().then(c.t.bind(c,54160,23)),Promise.resolve().then(c.t.bind(c,31603,23)),Promise.resolve().then(c.t.bind(c,68495,23)),Promise.resolve().then(c.t.bind(c,75170,23)),Promise.resolve().then(c.t.bind(c,77526,23)),Promise.resolve().then(c.t.bind(c,78922,23)),Promise.resolve().then(c.t.bind(c,29234,23)),Promise.resolve().then(c.t.bind(c,12263,23)),Promise.resolve().then(c.bind(c,82146))},80596:(a,b,c)=>{Promise.resolve().then(c.bind(c,46273)),Promise.resolve().then(c.bind(c,34167))},82704:()=>{},87429:(a,b,c)=>{"use strict";c.d(b,{AuthProvider:()=>e});var d=c(97954);let e=(0,d.registerClientReference)(function(){throw Error("Attempted to call AuthProvider() from the server but AuthProvider is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/gab_mbam4/Documents/rocketlab/quotation-generator/contexts/AuthContext.tsx","AuthProvider");(0,d.registerClientReference)(function(){throw Error("Attempted to call useAuth() from the server but useAuth is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/gab_mbam4/Documents/rocketlab/quotation-generator/contexts/AuthContext.tsx","useAuth"),(0,d.registerClientReference)(function(){throw Error("Attempted to call useIsAdmin() from the server but useIsAdmin is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/gab_mbam4/Documents/rocketlab/quotation-generator/contexts/AuthContext.tsx","useIsAdmin"),(0,d.registerClientReference)(function(){throw Error("Attempted to call useRequireAuth() from the server but useRequireAuth is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/gab_mbam4/Documents/rocketlab/quotation-generator/contexts/AuthContext.tsx","useRequireAuth"),(0,d.registerClientReference)(function(){throw Error("Attempted to call useRequireAdmin() from the server but useRequireAdmin is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/gab_mbam4/Documents/rocketlab/quotation-generator/contexts/AuthContext.tsx","useRequireAdmin")}};