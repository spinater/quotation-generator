(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7099],{63:(e,t,s)=>{"use strict";var r=s(7260);s.o(r,"useRouter")&&s.d(t,{useRouter:function(){return r.useRouter}})},325:(e,t,s)=>{Promise.resolve().then(s.bind(s,9600)),Promise.resolve().then(s.t.bind(s,2619,23))},1010:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(1847).A)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},1360:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(1847).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},1847:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});var r=s(2115);let l=function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter((e,t,s)=>!!e&&""!==e.trim()&&s.indexOf(e)===t).join(" ").trim()};var o={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let a=(0,r.forwardRef)((e,t)=>{let{color:s="currentColor",size:a=24,strokeWidth:n=2,absoluteStrokeWidth:i,className:c="",children:d,iconNode:u,...h}=e;return(0,r.createElement)("svg",{ref:t,...o,width:a,height:a,stroke:s,strokeWidth:i?24*Number(n)/Number(a):n,className:l("lucide",c),...h},[...u.map(e=>{let[t,s]=e;return(0,r.createElement)(t,s)}),...Array.isArray(d)?d:[d]])}),n=(e,t)=>{let s=(0,r.forwardRef)((s,o)=>{let{className:n,...i}=s;return(0,r.createElement)(a,{ref:o,iconNode:t,className:l("lucide-".concat(e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),n),...i})});return s.displayName="".concat(e),s}},6717:(e,t,s)=>{"use strict";s.d(t,{z:()=>c});var r=s(5155),l=s(2115),o=s(63),a=s(1010);let n=(0,s(1847).A)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);var i=s(1360);let c=e=>{let{documentType:t,documentId:s,documentNumber:c,onDeleteSuccess:d,onDeleteError:u}=e,h=(0,o.useRouter)(),[x,m]=(0,l.useState)(!1),[g,f]=(0,l.useState)(!1),p=async()=>{m(!0);try{let e=await fetch("/api/".concat(t,"s/").concat(s),{method:"DELETE"});if(!e.ok){let t=await e.json();throw Error(t.error||"Failed to delete document")}d&&d(),h.push("/".concat(t)),h.refresh()}catch(s){console.error("Error deleting ".concat(t,":"),s);let e=s instanceof Error?s.message:"Failed to delete document";u?u(e):alert(e)}finally{m(!1),f(!1)}},b="quotation"===t?"ใบเสนอราคา":"invoice"===t?"ใบแจ้งหนี้":"ใบเสร็จรับเงิน";return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex gap-3",children:[(0,r.jsxs)("button",{onClick:()=>{h.push("/".concat(t,"/").concat(s,"/edit"))},className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors inline-flex items-center gap-2",children:[(0,r.jsx)(a.A,{className:"w-4 h-4"}),"✏️ Edit"]}),(0,r.jsx)("button",{onClick:()=>{f(!0)},disabled:x,className:"bg-red-600 text-white px-6 py-3 rounded-lg hover:bg-red-700 transition-colors inline-flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:x?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.A,{className:"w-4 h-4"}),"\uD83D\uDDD1️ Delete"]})})]}),g&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full p-6",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,r.jsx)("div",{className:"bg-red-100 p-3 rounded-full",children:(0,r.jsx)(i.A,{className:"w-6 h-6 text-red-600"})}),(0,r.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:"ยืนยันการลบ / Confirm Delete"})]}),(0,r.jsxs)("p",{className:"text-gray-700 mb-2",children:["คุณแน่ใจหรือไม่ว่าต้องการลบ",b,"นี้?"]}),(0,r.jsxs)("p",{className:"text-gray-700 mb-4",children:["Are you sure you want to delete this ",t,"?"]}),(0,r.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3 mb-4",children:[(0,r.jsx)("p",{className:"text-sm text-yellow-800 font-medium",children:c}),(0,r.jsx)("p",{className:"text-xs text-yellow-700 mt-1",children:"⚠️ การดำเนินการนี้ไม่สามารถย้อนกลับได้"}),(0,r.jsx)("p",{className:"text-xs text-yellow-700",children:"This action cannot be undone"})]}),(0,r.jsxs)("div",{className:"flex gap-3 justify-end",children:[(0,r.jsx)("button",{onClick:()=>{f(!1)},disabled:x,className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors disabled:opacity-50",children:"ยกเลิก / Cancel"}),(0,r.jsx)("button",{onClick:p,disabled:x,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50 inline-flex items-center gap-2",children:x?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.A,{className:"w-4 h-4"}),"ลบ / Delete"]})})]})]})})]})}},9600:(e,t,s)=>{"use strict";s.d(t,{QuotationDetailActions:()=>c});var r=s(5155),l=s(2115),o=s(7453);let a=e=>{let{quotation:t}=e,s=(0,l.useRef)(null),[a,n]=(0,l.useState)(!1);return(0,l.useEffect)(()=>{(0,o.hk)().then(e=>{s.current=e,n(!0)})},[]),(0,r.jsxs)("div",{className:"flex gap-3",children:[(0,r.jsx)("button",{onClick:()=>{if(s.current){var e;let{pdfMake:r,vfs:l,fonts:a}=s.current;console.log("\uD83D\uDD0D BEFORE createPdf - Checking pdfMake object:"),console.log("  - pdfMake exists:",!!r),console.log("  - vfs exists:",!!l),console.log("  - fonts exists:",!!a),l&&(console.log("  - VFS keys count:",Object.keys(l).length),console.log("  - VFS has Sarabun-Regular.ttf:",!!l["Sarabun-Regular.ttf"]),console.log("  - VFS has Sarabun-Bold.ttf:",!!l["Sarabun-Bold.ttf"]),console.log("  - VFS has NotoSansThai.ttf:",!!l["NotoSansThai.ttf"]),console.log("  - VFS Thai font keys:",Object.keys(l).filter(e=>e.includes("Sarabun")||e.includes("Noto")))),a&&console.log("  - Font families:",Object.keys(a));let n=(0,o.A_)(t);console.log("  - docDefinition.defaultStyle.font:",null==(e=n.defaultStyle)?void 0:e.font),r.createPdf(n,null,a,l).open()}},disabled:!a,className:"inline-flex items-center gap-2 px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:a?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),"Preview PDF"]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("svg",{className:"w-4 h-4 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Loading..."]})}),(0,r.jsx)("button",{onClick:()=>{if(s.current){let{pdfMake:e,vfs:r,fonts:l}=s.current,a=(0,o.A_)(t);e.createPdf(a,null,l,r).download("quotation-".concat(t.quotationNumber,".pdf"))}},disabled:!a,className:"inline-flex items-center gap-2 px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:a?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Download PDF"]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("svg",{className:"w-4 h-4 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Loading..."]})})]})},n=e=>{let{quotation:t}=e;return(0,r.jsx)("div",{className:"flex gap-3",children:(0,r.jsx)(a,{quotation:t})})};var i=s(6717);let c=e=>{let{quotation:t}=e;return(0,r.jsxs)("div",{className:"flex gap-3",children:[(0,r.jsx)(n,{quotation:t}),(0,r.jsx)(i.z,{documentType:"quotation",documentId:t.id,documentNumber:t.quotationNumber})]})}}},e=>{e.O(0,[2619,7453,8441,1255,7358],()=>e(e.s=325)),_N_E=e.O()}]);