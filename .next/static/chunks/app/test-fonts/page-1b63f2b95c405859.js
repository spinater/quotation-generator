(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2816],{544:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var n=s(5155),a=s(2115),l=s(7453);function o(){let[e,t]=(0,a.useState)("Not started"),[s,o]=(0,a.useState)([]),[r,i]=(0,a.useState)(null),[c,d]=(0,a.useState)(null),h=e=>{o(t=>[...t,"[".concat(new Date().toISOString().slice(11,19),"] ").concat(e)]),console.log(e)};(0,a.useEffect)(()=>{(async()=>{try{t("Loading PDFMake..."),h("Starting PDFMake initialization...");let e=await (0,l.hk)();if(!e)throw Error("PDFMake initialization returned null");i(e),t("Ready!"),h("PDFMake loaded successfully"),h("VFS keys: ".concat(Object.keys(e.vfs).filter(e=>e.includes("ttf")).join(", "))),h("Fonts configured: ".concat(Object.keys(e.fonts).join(", ")))}catch(s){let e=s instanceof Error?s.message:String(s);d(e),t("Error!"),h("ERROR: ".concat(e))}})()},[]);let x=async()=>{try{for(let e of(h("Checking font files..."),["/fonts/Sarabun-Regular.ttf","/fonts/Sarabun-Bold.ttf","/fonts/NotoSansThai.ttf"])){let t=await fetch(e);if(t.ok){let s=t.headers.get("content-length");h("✅ ".concat(e," - OK (").concat(s?"".concat(Math.round(parseInt(s)/1024),"KB"):"size unknown",")"))}else h("❌ ".concat(e," - FAILED (").concat(t.status,")"))}}catch(e){h("Font check error: ".concat(e))}};return(0,n.jsx)("div",{className:"min-h-screen bg-gray-50 p-8",children:(0,n.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,n.jsx)("h1",{className:"text-3xl font-bold mb-2",children:"Font Loading Test"}),(0,n.jsx)("p",{className:"text-gray-600 mb-6",children:"Diagnostic page for PDFMake Thai font loading"}),(0,n.jsxs)("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,n.jsx)("h2",{className:"text-xl font-semibold",children:"Status"}),(0,n.jsx)("span",{className:"px-3 py-1 rounded-full text-sm font-medium ".concat("Ready!"===e?"bg-green-100 text-green-800":"Error!"===e?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"),children:e})]}),c&&(0,n.jsx)("div",{className:"bg-red-50 border border-red-200 rounded p-4 mb-4",children:(0,n.jsx)("p",{className:"text-red-800 text-sm",children:c})}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)("button",{onClick:x,className:"w-full px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50",children:"Check Font Files"}),(0,n.jsx)("button",{onClick:()=>{if(!r)return void h("PDFMake not ready yet");try{h("Creating test PDF...");let e={content:[{text:"Font Test Document",style:"header"},{text:"\n"},{text:"English Text: The quick brown fox jumps over the lazy dog",fontSize:12},{text:"Thai Text: ทดสอบฟอนต์ภาษาไทย กขฃคฅฆง",fontSize:12},{text:"Bold Thai: ทดสอบตัวหนา",fontSize:12,bold:!0},{text:"Numbers: 0123456789",fontSize:12},{text:"Postal Code: 40000",fontSize:12},{text:"\n"},{text:["ชื่อบริษัท: ",{text:"บริษัท ทดสอบ จำกัด",bold:!0}],fontSize:12},{text:"ที่อยู่: 123/45 ถนนทดสอบ แขวงทดสอบ เขททดสอบ กรุงเทพมหานคร 10110",fontSize:10}],defaultStyle:{font:"Sarabun"},styles:{header:{fontSize:18,bold:!0}}};h("Opening PDF in new tab..."),r.createPdf(e).open(),h("PDF opened successfully")}catch(t){let e=t instanceof Error?t.message:String(t);h("PDF Generation Error: ".concat(e)),d(e)}},disabled:!r,className:"w-full px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Generate Test PDF"})]})]}),(0,n.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,n.jsx)("h2",{className:"text-xl font-semibold",children:"Console Logs"}),(0,n.jsx)("button",{onClick:()=>o([]),className:"text-sm text-gray-600 hover:text-gray-800",children:"Clear"})]}),(0,n.jsx)("div",{className:"bg-gray-900 text-green-400 font-mono text-xs p-4 rounded h-96 overflow-y-auto",children:0===s.length?(0,n.jsx)("p",{className:"text-gray-500",children:"No logs yet..."}):s.map((e,t)=>(0,n.jsx)("div",{className:"mb-1",children:e},t))})]}),(0,n.jsxs)("div",{className:"mt-6 bg-blue-50 border border-blue-200 rounded-lg p-6",children:[(0,n.jsx)("h3",{className:"font-semibold text-blue-900 mb-2",children:"Instructions:"}),(0,n.jsxs)("ol",{className:"list-decimal list-inside space-y-1 text-blue-800 text-sm",children:[(0,n.jsx)("li",{children:"Watch the status indicator - it should turn green when ready"}),(0,n.jsx)("li",{children:'Click "Check Font Files" to verify fonts are accessible'}),(0,n.jsx)("li",{children:'Click "Generate Test PDF" to create a test document'}),(0,n.jsx)("li",{children:"Check the console logs for any errors"}),(0,n.jsx)("li",{children:"Open browser console (F12) for detailed debugging"})]})]})]})})}},5589:(e,t,s)=>{Promise.resolve().then(s.bind(s,544))}},e=>{e.O(0,[7453,8441,1255,7358],()=>e(e.s=5589)),_N_E=e.O()}]);